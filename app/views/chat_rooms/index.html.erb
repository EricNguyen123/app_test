<div id="chatroom_container" class="row bg-dark text-light" data-user="<%= current_user.id %>">
  <div id="side_panel" class="col-md-4 col-sm-4">
    <h5> Hi <%= @current_user.name %> </h5>
    <h4> Users </h4>
    <%= turbo_stream_from "users" %>
    <div id="users">
      <ul class="list-group">
        <% if @user_chats %>
          <%= render "users/user_chat", user_chats: @user_chats %>
        <% else %>
          <p>Follow people to start chatting</p>
        <% end %>
      </ul>
    </div>
    <h4> Rooms </h4>
    <%= render partial: "layouts/new_room_form" %>
    <%= turbo_stream_from "chat_rooms" %>
    <div id="chat_rooms">
      <ul class="list-group">
        <%= render @chat_rooms %>
      </ul>
    </div>
  </div>
  <div id="room_container" class="col-md-8 col-sm-8 bg-dark text-light">
    <% if @single_room %>
      <div id="single_room">
        <h4 class="text-center">
          <%= @user&.name || @single_room.title %>
        </h4>
        <div class="box-msg" data-controller="scroll">
          <%= turbo_stream_from 'messages' %>
          <div id="messages" class="item-msg">
            <%= render partial:'messages/message', collection: @messages, as: :message %>
          </div>
        </div>
        <%= render partial: 'layouts/new_message_form' %>
      </div>
    <% end %>
  </div>
</div>
